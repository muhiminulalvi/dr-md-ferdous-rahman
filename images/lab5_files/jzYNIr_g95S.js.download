;/*FB_PKG_DELIM*/

__d("MWChatEmojiPickerWithSearch.bs",["fbt","ix","CometColumn.react","CometColumnItem.react","CometEmojiPickerSearchResults.react","CometProgressIndicator.react","CometRoundedTextInput.react","MWChatEmojiCategorySelector.bs","MWIcon.react","MWPBumpEntityKey","MWV2ComposerEmojiPickerHook","TetraCircleButton.react","bs_belt_Option","bs_caml_option","bs_curry","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k={emojiInner:{height:"xo4zgqt",$$css:!0},emojiPicker:{paddingStart:"xurb0ha",paddingEnd:"x1sxyh0",$$css:!0},emojiPickerContainer:{paddingTop:"xz9dl7a",width:"xj6ak53",$$css:!0},emojiPickerContainerSmall:{paddingTop:"xexx8yu",width:"xlro9se",$$css:!0},emojiSearch:{marginBottom:"x12nagc",paddingStart:"xurb0ha",paddingEnd:"x1sxyh0",$$css:!0},loader:{height:"x5yr21d",$$css:!0},topSection:{alignItems:"xuk3077",display:"x78zum5",flexDirection:"xdt5ytf",marginStart:"xrzrlj5",width:"xh8yej3",$$css:!0}};function l(a){var b=a.searchQuery,e=a.setSearchQuery;a=h._("__JHASH__9_B0HYy73CK__JHASH__");a={autoFocus_PLEASE_USE_FOCUS_REGION_INSTEAD:!0,icon:j.jsx(c("MWIcon.react"),{color:"tertiary",icon:d("fbicon")._(i("491282"),16),size:16}),label:a,onChange:function(a){a=a.target.value;var b=a==null?"":a;return c("bs_curry")._1(e,function(a){return b})},placeholder:a,spellCheck:!1,value:b};b=b.length!==0?c("bs_caml_option").some(j.jsx(c("TetraCircleButton.react"),{color:"tertiary",icon:d("fbicon")._(i("478232"),16),label:h._("__JHASH__04yVFCps0C___JHASH__"),onPress:function(a){return c("bs_curry")._1(e,function(a){return""})},size:24})):void 0;b!==void 0&&(a.addOnEnd=c("bs_caml_option").valFromOption(b));return j.jsx("div",{className:"x12nagc xurb0ha x1sxyh0",children:j.jsx(c("CometRoundedTextInput.react"),babelHelpers["extends"]({},a))})}l.displayName=l.name+" [from "+f.id+"]";b={make:l};function a(a){var b=a.onSelect,e=a.selectedEmoji,f=a.gridColumns;a=a.topSection;f=f!==void 0?f:8;a=a!==void 0?c("bs_caml_option").valFromOption(a):null;var g=j.useState(function(){return""}),h=g[0],i=c("MWV2ComposerEmojiPickerHook")(h);return j.jsxs("div",{className:""+(f===8?" xz9dl7a xj6ak53":" xexx8yu xlro9se"),children:[j.jsx(l,{searchQuery:h,setSearchQuery:g[1]}),j.jsx("div",{className:"xo4zgqt",role:"grid",children:j.jsx(j.Suspense,{fallback:j.jsx(c("CometColumn.react"),{align:"center",expanding:!0,verticalAlign:"center",xstyle:[k.loader],children:j.jsx(c("CometColumnItem.react"),{children:j.jsx(c("CometProgressIndicator.react"),{})})}),children:j.jsx(c("CometEmojiPickerSearchResults.react"),{categorySelector:d("MWChatEmojiCategorySelector.bs").make,gridColumns:f,height:265,onSelect:function(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.reactions",h.trim()===""?"select_reaction":"select_reaction.search");return b(a)},query:i,searchQuery:h,selected:c("bs_belt_Option").getWithDefault(e,""),topSection:a,xstyle:k.emojiPicker})})})]})}a.displayName=a.name+" [from "+f.id+"]";e=a;g.EmojiSearch=b;g.make=e}),98);
__d("UnicodeUtils.bs",["UnicodeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("UnicodeUtils").getCodePoints(a)}g.getCodePoints=a}),98);
__d("MWChatEmojiPicker.bs",["fbt","CometEmojiGrid.react","CometEmojiPicker.react","CometFocusTable.react","CometLazyDialogTrigger.react","CometPopover.react","CometPressable.react","JSResource","MWChatEmojiCategorySelector.bs","MWChatEmojiPickerWithSearch.bs","MWChatMessageId.bs","MWPBumpEntityKey","MWText.react","UnicodeUtils.bs","bs_belt_Option","bs_caml_option","bs_curry","bs_int64","gkx","qex","react","requireDeferred","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=c("requireDeferred")("MWChatCustomReactionsLog.bs").__setRef("MWChatEmojiPicker.bs"),k={customizeButton:{marginEnd:"x1ffeobu",marginTop:"x1k70j0n",zIndex:"x1vjfegm",$$css:!0},customizeButtonContainer:{marginBottom:"xccbga4",$$css:!0},customizeButtonContainerSearch:{display:"x78zum5",justifyContent:"x13a6bvl",left:"xu96u03",marginTop:"x1kgmq87",position:"x10l6tqk",right:"x3m8u43",$$css:!0},customizeButtonSearch:{borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",paddingTop:"x1yrsyyn",paddingEnd:"xsyo7zv",paddingBottom:"x10b6aqq",paddingStart:"x16hj40l",$$css:!0},emojiPicker:{paddingStart:"x1e558r4",$$css:!0},emojiPickerContainer:{paddingTop:"x889kno",width:"xlro9se",$$css:!0},topSection:{alignItems:"xuk3077",display:"x78zum5",flexDirection:"xdt5ytf",marginStart:"xrzrlj5",width:"xh8yej3",$$css:!0}},l=c("gkx")("467"),m=c("bs_belt_Option").getWithDefault(c("bs_caml_option").nullable_to_opt(c("qex")._("650")),!1);function n(a){var b=a.messageID,e=a.onSelect,f=a.reactions,g=a.selectedEmoji,n=a.threadKey,o=i.useMemo(function(){return f.map(function(a){return{codepoints:d("UnicodeUtils.bs").getCodePoints(a.emoji),id:c("bs_int64").to_string(a.emojiIdx)}})},[f]),p=i.useCallback(function(a){j.onReady(function(a){return c("bs_curry")._2(a.logEnterCustomizeFlow,b,n)})},[JSON.stringify(n),b]);i.useRef(null);a=i.useMemo(function(){var a={columns:6,emojiCollection:o,emojiSize:m?30:28,emojiSpacing:m?2:4,label:h._("__JHASH__kJyxemnI5ZP__JHASH__"),onClick:function(a,b,c){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.reactions","select_reaction.quick");return e(a,0,0)}};g!==void 0&&(a.selectedEmoji=g);return i.jsxs("div",{className:c("stylex")(m?!1:k.topSection),children:[l?i.jsx(c("CometLazyDialogTrigger.react"),{dialogProps:{messageID:b,onClose:function(a){},reactions:f,threadKey:n},dialogResource:c("JSResource")("MWChatCustomizeReactionsDialog").__setRef("MWChatEmojiPicker.bs"),children:function(a){return i.jsx(d("CometFocusTable.react").CometFocusRow,{role:"row",children:i.jsx(d("CometFocusTable.react").CometFocusCell,{children:i.jsx("div",{className:""+(m?" x78zum5 x13a6bvl xu96u03 x1kgmq87 x10l6tqk x3m8u43":" xccbga4"),children:i.jsx(c("CometPressable.react"),{onPress:function(b){c("bs_curry")._1(a);return c("bs_curry")._1(p)},testid:void 0,xstyle:function(a){return[m?k.customizeButtonSearch:k.customizeButton]},children:i.jsx(c("MWText.react"),{type:"bodyLink4",children:h._("__JHASH__BBwala8AXtL__JHASH__")})})})})})}}):null,i.jsx(c("CometEmojiGrid.react"),babelHelpers["extends"]({},a),"your-reactions-grid")]})},[o,e,g,l,b,f,p,JSON.stringify(n)]);var q;if(m)q=i.jsx(d("MWChatEmojiPickerWithSearch.bs").make,{gridColumns:6,onSelect:function(a,b,c){return e(a,0,0)},selectedEmoji:g,topSection:a});else{a={categorySelector:d("MWChatEmojiCategorySelector.bs").make,emojiSize:28,emojiSpacing:4,gridColumns:6,height:305,onSelect:function(a,b,c){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.reactions","select_reaction");return e(a,0,0)},topSection:a,xstyle:k.emojiPicker};g!==void 0&&(a.selectedEmoji=g);q=i.jsx(c("CometEmojiPicker.react"),babelHelpers["extends"]({},a))}return i.jsx(c("CometPopover.react"),{testid:void 0,withArrow:!0,children:i.jsx("div",{className:"x889kno xlro9se",children:q})})}n.displayName=n.name+" [from "+f.id+"]";b={make:n};function a(a){var b=a.messageID,c=a.onSelect,e=a.reactions;a=a.selectedEmoji;var f=d("MWChatMessageId.bs").getMessageId(b);b=d("MWChatMessageId.bs").getThreadId(b);if(f!==void 0&&b!==void 0)return i.jsx(n,{messageID:f,onSelect:c,reactions:e,selectedEmoji:a,threadKey:b});else return null}e=a;g.withCustomReactions=l;g.withSearch=m;g.MWChatEmojiPickerInner=b;g.make=e}),98);
__d("MWChatReactionsMenu.bs",["fbt","ix","CometKeys","CometPressable.react","EmojiFormat.bs","EmojiRenderer","FocusRegion.react","KeyCommandHandler.react","LSEmojiSetsType.bs","MAWGating","MWChatEmojiPicker.bs","MWChatMessageBothOrientationFocusGroup.bs","MWChatReactionEmoji.bs","MWChatReactionsUtils.bs","MWInboxPassiveContext.bs","MWMessageCellFocusTable.bs","MWPBumpEntityKey","ReQL.bs","ReQLSubscription.bs","TetraCircleButton.react","bs_caml","bs_caml_obj","bs_curry","bs_int64","cr:4708","fbicon","focusScopeQueries","gkx","react","recoverableViolation","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k={item:{display:"x1rg5ohu",paddingTop:"x1nn3v0j",paddingEnd:"xg83lxy",paddingBottom:"x1120s5i",paddingStart:"x1h0ha7o",$$css:!0},menu:{backgroundColor:"x2bj2ny",borderTop:"x6umtig",borderEnd:"x1b1mbwd",borderBottom:"xaqea5y",borderStart:"xav7gou",borderTopStartRadius:"x1z11no5",borderTopEndRadius:"xjy5m1g",borderBottomEndRadius:"x1mnwbp6",borderBottomStartRadius:"x4pb5v6",boxShadow:"x104qc98",display:"x78zum5",paddingStart:"x1ye3gou",paddingEnd:"xn6708d",paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",$$css:!0},selected:{backgroundColor:"x1vtvx1t",borderTopStartRadius:"x1lq0und",borderTopEndRadius:"x904243",borderBottomEndRadius:"xunswzr",borderBottomStartRadius:"x1hba98",$$css:!0}},l=c("gkx")("467")||c("gkx")("4428"),m=c("gkx")("4428");function n(a,b){var e=c("useReStore")(),f=d("ReQLSubscription.bs").useArray(j.useMemo(function(){return d("ReQL.bs").filter(d("ReQL.bs").fromTableDescending(e.table("emoji_sets")),function(a){return c("bs_caml").i64_eq(a.type_,d("LSEmojiSetsType.bs").userGenerated)})},[e])),g=j.useMemo(function(){return f.sort(function(a,b){return c("bs_int64").compare(a.sortKey,b.sortKey)}).reduce(function(a,b){var c=b.emoji;if(c!==void 0)return a.concat([{categoryIdx:b.categoryIdx,emoji:c,emojiIdx:b.emojiIdx,sortKey:b.sortKey,type_:b.type_}]);else return a},[])},[f]),h=g.length===d("MWChatReactionsUtils.bs").cUSTOM_REACTIONS_NUM;if(c("gkx")("8026")&&b)return d("MWChatReactionsUtils.bs").defaultCustomizableReactions;if(a)if(h)return g;else return d("MWChatReactionsUtils.bs").defaultCustomizableReactions;else return d("MWChatReactionsUtils.bs").defaultStaticReactions}function o(a){var e=a.emoji,f=a.onSelect,g=a.selected;a=d("MWInboxPassiveContext.bs").useMWInboxPassiveContext();var h=a.setIsPassive;a=j.useMemo(function(){return d("EmojiRenderer").parse(e).map(function(a){return a.emoji})},[e]);if(a.length!==1){c("recoverableViolation")("Unable to parse reaction emoji "+e,"messenger_comet");return null}a=a[0];a=j.jsx(d("MWMessageCellFocusTable.bs").FocusTable[2],{children:j.jsx(c("CometPressable.react"),{onPress:function(a){c("gkx")("6531")&&h(!1);return f()},overlayDisabled:!0,role:"menuitem",xstyle:function(a){return[k.item,g?k.selected:!1]},children:b("cr:4708")==null?j.jsx(d("MWChatReactionEmoji.bs").make,{emoji:a,size:32,testid:void 0}):j.jsx(b("cr:4708"),{emoji:a,hasTooltip:!0,size:32,testid:void 0})})});return j.jsx(d("MWChatMessageBothOrientationFocusGroup.bs").FocusGroupItem,{children:a})}o.displayName=o.name+" [from "+f.id+"]";e={make:o};var p={key:c("CometKeys").UP},q={key:c("CometKeys").DOWN},r=[];function a(a){var b=a.closeActionsMenu,e=a.isBroadcastThread,f=a.messageID,g=a.onClose,k=a.onSelect,p=a.selectedReaction,q=a.setShowEmojiPicker,s=a.showEmojiPicker,t=a.isSecure;a=a.disableCustomReactions;t=t!==void 0?t:!1;a=a!==void 0?a:!1;var u=function(a){var d=a.key;if(d==="Escape")return c("bs_curry")._1(b);else if(!s&&(d==="ArrowUp"||d==="ArrowDown")||d==="ArrowLeft"||d==="ArrowRight"||d==="PageUp"||d==="PageDown"||d==="Home"||d==="End"){a.stopPropagation();return}else return},v=h._("__JHASH__plktFYNJzZQ__JHASH__");t=t?d("MAWGating").isCustomReactionsEnabled()&&l:l&&!a;a=n(t,e);e=j.jsx(c("TetraCircleButton.react"),{icon:d("fbicon")._(i("483767"),12),label:h._("__JHASH__rcFhvEPmBgd__JHASH__"),onPress:function(a){return c("bs_curry")._1(q,function(a){return!a})},size:36,testid:void 0,type:"normal"});var w=j.useMemo(function(){return function(a,b,e){c("bs_curry")._1(k,d("EmojiFormat.bs").codeArrayToUnicode(a));return c("bs_curry")._1(g)}},[k,g]);f=s?j.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,children:j.jsx(d("MWChatEmojiPicker.bs").make,{messageID:f,onSelect:w,reactions:m?r:a,selectedEmoji:p})}):j.jsx("div",{"aria-label":v,"aria-orientation":"horizontal",className:"x2bj2ny x6umtig x1b1mbwd xaqea5y xav7gou x1z11no5 xjy5m1g x1mnwbp6 x4pb5v6 x104qc98 x78zum5 x1ye3gou xn6708d x1y1aw1k xwib8y2",role:"menu",children:a.map(function(a){var b=a.emoji;return j.jsx(o,{emoji:b,onSelect:function(a){c("bs_curry")._1(k,b);d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.reactions","select_reaction.quick");return c("bs_curry")._1(g)},selected:c("bs_caml_obj").caml_equal(p,b)},b)}).concat([t?j.jsx(d("MWChatMessageBothOrientationFocusGroup.bs").FocusGroupItem,{children:e},"plus-button"):null])});return j.jsx(d("MWChatMessageBothOrientationFocusGroup.bs").FocusGroup,{allowModifiers:!0,orientation:"both",preventScrollOnFocus:!1,tabScopeQuery:d("focusScopeQueries").tabbableScopeQuery,children:j.jsx(c("KeyCommandHandler.react"),{onKeyDown:u,children:f})})}a.displayName=a.name+" [from "+f.id+"]";f=a;g.gkAllowCustomReactions=l;g.isWorkplaceCustomReactions=m;g.EmojiButton=e;g.keyUp=p;g.keyDown=q;g.workplaceCustomReactions=r;g.make=f}),98);
__d("MWChatReactionsMenu",["MWChatReactionsMenu.bs"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=d("MWChatReactionsMenu.bs").make}),98);